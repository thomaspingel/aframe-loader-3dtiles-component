<head>
  <title>My A-Frame Scene</title>
  <!-- <script src="https://aframe.io/releases/1.3.0/aframe.min.js%22%3E</script> -->
  <script src="aframe.min.js"></script>
  <script src='https://cdn.jsdelivr.net/npm/three@0.137.0/examples/js/utils/WorkerPool.js%27%3E'></script>
  <script src='https://cdn.jsdelivr.net/npm/three@0.137.0/examples/js/loaders/KTX2Loader.js%27%3E'></script>
  <script src="./dist/aframe-loader-laz-component.js?v62"></script>
  <script src="./classifier.js"></script>
</head>

<body>
  <a-scene environment="preset: default"
         background="color: #AAAAAA"
         keyboard-shortcuts="enterVR: false;"
         vr-mode-ui="enabled: false;"
         download-button>

  <!-- CAMERA -->
  <!-- <a-camera id="camera" camera-logger position="553837 4118282 624" rotation="-36 -256 0" > -->
  <a-camera id="camera" position="0 2 0">
    <a-entity id="download-buttonid" geometry="primitive: box" material="color: red" position="-3 1 -2.5"></a-entity>
<!--    <a-entity id="loadurl-buttonid" geometry="primitive: box" material="color: purple" position="3 -1 -3"></a-entity>-->
<!--    <a-entity position="0 1.5 -2" id="urltext" textarea="backgroundColor:white; color:black; cols:10; rows:1;value:5;"></a-entity>-->
  </a-camera>

  <!-- CONTROLS -->
  <a-entity oculus-touch-controls="hand: left">
    <a-sphere raycaster="objects:#pointcloud" trigger id="sph" position="0 0 -0.25" material="color:red" scale="0.5 0.5 0.5"></a-sphere>
    </a-entity>
  <a-entity oculus-touch-controls="hand: right" trigger ></a-entity>
  <a-entity cursor="rayOrigin:mouse"></a-entity>

  <!-- POINTCLOUD -->
<a-entity
  id="pointcloud"
  position="0 0 0"
  rotation="0 0 0"
  scale="1 1 1"
  classifier 
  lasloader="
    url: 'nothing_for_now';
    downid: #download-buttonid;
    cameraEl: #camera;
    pointcloudColoring: classification; 
    "
  >
</a-entity>

</a-scene>

</body>

<!-- CHANGING URL -->
<!--http://rawhitten.github.io/chunk.laz
https://rawhitten.github.io/pdal.southwest.09242022.laz;-->
<!--https://rawhitten.github.io/tree.laz-->


<script>
  const pointcloud = document.getElementById("pointcloud");
  console.log(window.location.search)
  var url = new URL(window.location.href);
  var PTlink = url.searchParams.get("link");
  pointcloud.setAttribute('lasloader', {url: PTlink});
</script>

